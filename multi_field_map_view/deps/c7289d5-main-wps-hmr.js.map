{"version":3,"sources":["webpack:///./src/lib/components/MultiFieldMapView.js"],"names":["MultiFieldMapViewD3","el","props","width","height","svg","d3","append","attr","data","map","x","Math","random","y","circles","selectAll","enter","d","style","lasso1","lasso","closePathSelect","closePathDistance","items","targetArea","call","on","selectedData","selectedItems","console","log","domain","imageWidth","range","imageHeight","polygons","points","p","colormap","field","remove","drawPolygons"],"mappings":"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","file":"c7289d5-main-wps-hmr.js","sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\nimport { lasso } from 'd3-lasso';\n\nexport default class MultiFieldMapViewD3 {\n    constructor(el, props) {\n        const width = 500;\n        const height = 500;\n\n        const svg = d3.select('body')\n            .append('svg')\n            .attr('width', width)\n            .attr('height', height);\n\n        const data = d3.range(100).map(() => ({\n            x: Math.random() * width,\n            y: Math.random() * height,\n        }));\n\n        const circles = svg.selectAll('circle')\n            .data(data)\n            .enter()\n            .append('circle')\n            .attr('cx', d => d.x)\n            .attr('cy', d => d.y)\n            .attr('r', 10)\n            .style('fill', 'steelblue');\n\n        const lasso1 = lasso()\n            .closePathSelect(true)\n            .closePathDistance(100)\n            .items(circles)\n            .targetArea(svg);\n\n        svg.call(lasso1);\n\n        lasso1.on('end', () => {\n            const selectedData = lasso1.selectedItems().data();\n            console.log(selectedData);\n        });\n    }\n\n    drawPolygons() {\n        const props = this.props\n        const x = d3.scaleLinear()\n            .domain([0, this.props.imageWidth])\n            .range([0, this.props.width]);\n\n        const y = d3.scaleLinear()\n            .domain([this.props.imageHeight, 0])\n            .range([0, this.props.height]);\n\n        this.svg.selectAll('polygons')\n            .data(this.props.polygons)\n            .enter()\n            .append('polygon')\n            .attr('class', 'polygon')\n            .attr('points', function(d) {\n                return d.points.map((p) => [x(p[0]), y(p[1])]);\n            })\n            .attr('stroke', function(d) {\n                return props.colormap[d.field];\n            })\n            .attr('stroke-width', 3)\n            .attr('fill', 'none');\n    }\n\n    update(props) {\n        this.props = props;\n        this.svg.selectAll('.polygon').remove();\n        this.drawPolygons();\n    }\n}"],"sourceRoot":""}